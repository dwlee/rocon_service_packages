{"id":"78ea086d8e1a2d7de0cef90728da6e2f","js":"var is_empty;\nvar res;\nvar res_robosem;\nvar res_motion_checker;\nvar robosem_res;\nvar item;\nvar isworking_robosem;\nvar motion_checker_res;\nvar result;\nvar message;\nvar hue_id;\nvar hue_color;\n\nfunction welcome(res_robosem, res_motion_checker) {\n  setTimeout(function(){ Fiber(function(){  $engine.scheduledPublish(res_robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'안녕하세요. 먼저 회의실을 체크할께요'}));$engine.scheduledPublish(res_robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'HAPPY3'}));UDF_set_light([3, 1, 2], 'WHITE', null, null, 'WHITE');check_room_ex(res_motion_checker);\n    $engine.sleep(2000);$engine.scheduledPublish(res_robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'빨간불이 켜진 방이 현재 사용중이고, '}));$engine.scheduledPublish(res_robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'LEFTATTENTION'}));$engine.sleep(4000);$engine.scheduledPublish(res_robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'녹색불이 켜진 방이 비어있는 회의실 입니다.'}));$engine.scheduledPublish(res_robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'RIGHTATTENTION'}));$engine.sleep(5500);$engine.print(\"Rocon Authoring :\" + JSON.stringify(is_empty));if (is_empty == true) {\n      $engine.scheduledPublish(res_robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'그럼 문을 열어 놓을께요. 안녕히가세요'}));$engine.scheduledPublish(res_robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'BYELEFTHAND'}));$engine.pub('/door_ctrl', 'std_msgs/Bool', ({data:true}));} else {\n      $engine.scheduledPublish(res_robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'비어있는 회의실이 없습니다. 나중에 다시 서비스를 시작해 주세요.'}));$engine.scheduledPublish(res_robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'BYELEFTHAND'}));UDF_set_light([1, 2, 3], 'OFF', null, null, 'OFF');}\n    $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Welcome End'));$engine.sleep(3000);UDF_set_light([3], 'OFF', null, null, 'OFF');$engine.sleep(8000);UDF_set_light([1, 2], 'OFF', null, null, 'OFF');isworking_robosem = false;\n  }).run(); }, 0);}\n\nfunction check_room_ex(res) {\n  $engine.runScheduledAction(res, \"check_motion\", \"rocon_ninja_block/CheckMotionAction\", ({\"device_name\":''}), function(item){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Result'));is_empty = false;\n    if (item['success'] == true) {\n      for (var result_index in item['is_detected']) {\n        result = item['is_detected'][result_index];\n        message = 'empty';\n        hue_id = 1;\n        hue_color = 'RED';\n        if (result['key'] == 'motion_detector') {\n          hue_id = 1;\n        } else if (result['key'] == 'motion_detector_2') {\n          hue_id = 2;\n        } else {\n          $engine.print(\"Rocon Authoring :\" + JSON.stringify('Unknown key'));$engine.print(\"Rocon Authoring :\" + JSON.stringify(result['key']));}\n        if (result['value'] == 'True') {\n          message = 'occupied';\n          hue_color = 'RED';\n        } else if (result['value'] == 'False') {\n          is_empty = true;\n          message = 'empty';\n          hue_color = 'GREEN';\n        } else {\n          $engine.print(\"Rocon Authoring :\" + JSON.stringify('Unknown value'));$engine.print(\"Rocon Authoring :\" + JSON.stringify(result['value']));}\n        $engine.print(\"Rocon Authoring :\" + JSON.stringify([result['key'],': ',message].join('')));UDF_set_light([hue_id], hue_color, null, null, hue_color);}\n    }\n  }, function(item){ });}\n\n\n$engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Start Welcome workflow'));(function(robosem_res){ if(robosem_res){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation robosem resource success'));isworking_robosem = false;\n  (function(motion_checker_res){ if(motion_checker_res){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation room checker resource success'));$engine.subscribe('/beacons', 'std_msgs/String', function(item){   $engine.print(\"Rocon Authoring :\" + JSON.stringify(String('[Welcome] Subscribe Beacons: ') + String(item['data'])));if (item['data'] == 'D0:39:72:A3:DE:75') {\n        if (isworking_robosem == false) {\n          isworking_robosem = true;\n          welcome(robosem_res, motion_checker_res);\n        }\n      }\n     });$engine.scheduledSubscribe(robosem_res, 'touch_sensor_event', 'std_msgs/String', function(item){   if (item['data'] == 'right') {\n        if (isworking_robosem == false) {\n          isworking_robosem = true;\n          welcome(robosem_res, motion_checker_res);\n        }\n      } else if (item['data'] == 'left') {\n        if (isworking_robosem == false) {\n          isworking_robosem = true;\n          welcome(robosem_res, motion_checker_res);\n        }\n      } else {\n      }\n     }); }else{   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation room resource failure'));} })($engine.allocateResource(\"rocon_ninja_block/motion_checker\", \"rocon:/pc/motion_checker#rocon_ninja_block/motion_checker\", [{\"remap_from\":\"ninja_block_data\",\"remap_to\":\"/ninja_block_data\"},{\"remap_from\":\"check_motion\",\"remap_to\":\"/check_motion\"}], [], {\"type\":\"static\",\"timeout\":\"3600000\"})); }else{   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation robosem resource failure'));} })($engine.allocateResource(\"robosem_bridge/robosem_bridge\", \"rocon:/pc/robosem_bridge#robosem_bridge/robosem_bridge\", [{\"remap_from\":\"play_tts\",\"remap_to\":\"/play_tts\"},{\"remap_from\":\"robot_motion\",\"remap_to\":\"/robot_motion\"},{\"remap_from\":\"touch_sensor_event\",\"remap_to\":\"/touch_sensor_event\"}], [{\"key\":\"robosem_ip\",\"value\":\"192.168.10.28\"}], {\"type\":\"static\",\"timeout\":\"3600000\"}));\nis_empty = false;\n","xml":"<xml xmlns=\"http://www.w3.org/1999/xhtml\"><block type=\"action_speak\" id=\"725\" inline=\"false\" x=\"-448\" y=\"-876\"><value name=\"VALUE\"><block type=\"text\" id=\"726\"><field name=\"TEXT\">[Welcome] Start Welcome workflow</field></block></value><next><block type=\"ros_requester_allocate_with_block2\" id=\"727\" inline=\"false\"><mutation extra_config=\"{&quot;timeout&quot;:&quot;250000000&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;play_tts&quot;,&quot;remap_to&quot;:&quot;/play_tts&quot;},{&quot;remap_from&quot;:&quot;robot_motion&quot;,&quot;remap_to&quot;:&quot;/robot_motion&quot;},{&quot;remap_from&quot;:&quot;touch_sensor_event&quot;,&quot;remap_to&quot;:&quot;/touch_sensor_event&quot;}],&quot;parameters&quot;:[{&quot;key&quot;:&quot;robosem_ip&quot;,&quot;value&quot;:&quot;192.168.10.28&quot;}],&quot;rapp&quot;:&quot;robosem_bridge/robosem_bridge&quot;,&quot;uri&quot;:&quot;rocon:/pc/robosem_bridge#robosem_bridge/robosem_bridge&quot;}\"></mutation><field name=\"TYPE\">static</field><field name=\"ON_SUCCESS_PARAM\">robosem_res</field><value name=\"TIMEOUT_ALLOC\"><block type=\"ros_parameter\" id=\"728\"><mutation></mutation><field name=\"KEY\">alloc_timeout</field></block></value><statement name=\"ON_SUCCESS\"><block type=\"action_speak\" id=\"729\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"730\"><field name=\"TEXT\">[Welcome] Allocation robosem resource success</field></block></value><next><block type=\"variables_set\" id=\"731\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"732\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"ros_requester_allocate_with_block2\" id=\"733\" inline=\"false\"><mutation extra_config=\"{&quot;timeout&quot;:&quot;150000000&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;ninja_block_data&quot;,&quot;remap_to&quot;:&quot;/ninja_block_data&quot;},{&quot;remap_from&quot;:&quot;check_motion&quot;,&quot;remap_to&quot;:&quot;/check_motion&quot;}],&quot;parameters&quot;:[],&quot;rapp&quot;:&quot;rocon_ninja_block/motion_checker&quot;,&quot;uri&quot;:&quot;rocon:/pc/motion_checker#rocon_ninja_block/motion_checker&quot;}\"></mutation><field name=\"TYPE\">static</field><field name=\"ON_SUCCESS_PARAM\">motion_checker_res</field><value name=\"TIMEOUT_ALLOC\"><block type=\"ros_parameter\" id=\"734\"><mutation></mutation><field name=\"KEY\">alloc_timeout</field></block></value><statement name=\"ON_SUCCESS\"><block type=\"action_speak\" id=\"735\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"736\"><field name=\"TEXT\">[Welcome] Allocation room checker resource success</field></block></value><next><block type=\"ros_subscribe_/beacons-com.github.robotics_in_concert.rocon_android_apps.beacon_awareness_ex.BeaconAwarenessExMainActivity\" id=\"737\"><mutation extra=\"{&quot;client_app_name&quot;:&quot;com.github.robotics_in_concert.rocon_android_apps.beacon_awareness_ex.BeaconAwarenessExMainActivity&quot;}\"></mutation><field name=\"DO_PARAM\">item</field><statement name=\"DO\"><block type=\"action_speak\" id=\"738\" inline=\"false\"><value name=\"VALUE\"><block type=\"text_join\" id=\"739\" inline=\"false\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"740\"><field name=\"TEXT\">[Welcome] Subscribe Beacons: </field></block></value><value name=\"ADD1\"><block type=\"object_item_get\" id=\"741\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value></block></value><next><block type=\"controls_if\" id=\"742\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"743\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"744\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"745\"><field name=\"TEXT\">D0:39:72:A3:DE:75</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"746\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"747\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"748\"><field name=\"VAR\">isworking_robosem</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"749\"><field name=\"BOOL\">FALSE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"750\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"751\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"752\" inline=\"false\"><mutation name=\"welcome\"><arg name=\"res_robosem\"></arg><arg name=\"res_motion_checker\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"753\"><field name=\"VAR\">robosem_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"754\"><field name=\"VAR\">motion_checker_res</field></block></value></block></next></block></statement></block></statement></block></next></block></statement><next><block type=\"ros_scheduled_subscribe_touch_sensor_event\" id=\"755\" inline=\"true\"><mutation></mutation><field name=\"DO_PARAM\">item</field><value name=\"CTX\"><block type=\"variables_get\" id=\"756\"><field name=\"VAR\">robosem_res</field></block></value><statement name=\"DO\"><block type=\"controls_if\" id=\"757\" inline=\"false\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"758\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"759\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"760\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"761\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"762\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"763\"><field name=\"VAR\">isworking_robosem</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"764\"><field name=\"BOOL\">FALSE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"765\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"766\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"767\" inline=\"false\"><mutation name=\"welcome\"><arg name=\"res_robosem\"></arg><arg name=\"res_motion_checker\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"768\"><field name=\"VAR\">robosem_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"769\"><field name=\"VAR\">motion_checker_res</field></block></value></block></next></block></statement></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"770\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"771\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"772\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO1\"><block type=\"controls_if\" id=\"773\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"774\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"775\"><field name=\"VAR\">isworking_robosem</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"776\"><field name=\"BOOL\">FALSE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"777\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"778\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"779\" inline=\"false\"><mutation name=\"welcome\"><arg name=\"res_robosem\"></arg><arg name=\"res_motion_checker\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"780\"><field name=\"VAR\">robosem_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"781\"><field name=\"VAR\">motion_checker_res</field></block></value></block></next></block></statement></block></statement></block></statement></block></next></block></next></block></statement><statement name=\"ON_FAIL\"><block type=\"action_speak\" id=\"782\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"783\"><field name=\"TEXT\">[Welcome] Allocation room resource failure</field></block></value></block></statement></block></next></block></next></block></statement><statement name=\"ON_FAIL\"><block type=\"action_speak\" id=\"784\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"785\"><field name=\"TEXT\">[Welcome] Allocation robosem resource failure</field></block></value></block></statement></block></next></block><block type=\"procedures_defnoreturn\" id=\"786\" x=\"-390\" y=\"360\"><mutation><arg name=\"res_robosem\"></arg><arg name=\"res_motion_checker\"></arg></mutation><field name=\"NAME\">welcome</field><statement name=\"STACK\"><block type=\"defer\" id=\"787\"><statement name=\"DO\"><block type=\"ros_scheduled_publish_play_tts\" id=\"788\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"789\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"790\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"791\"><field name=\"TEXT\">안녕하세요. 먼저 회의실을 체크할께요</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"792\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"793\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"794\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"795\"><field name=\"TEXT\">HAPPY3</field></block></value></block></value><next><block type=\"udf_UDF_set_light\" id=\"796\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"797\" inline=\"false\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"798\"><field name=\"NUM\">3</field></block></value><value name=\"ADD1\"><block type=\"math_number\" id=\"799\"><field name=\"NUM\">1</field></block></value><value name=\"ADD2\"><block type=\"math_number\" id=\"800\"><field name=\"NUM\">2</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"801\"><field name=\"TEXT\">WHITE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"802\" inline=\"false\"><mutation name=\"check_room_ex\"><arg name=\"res\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"803\"><field name=\"VAR\">res_motion_checker</field></block></value><next><block type=\"action_sleep\" id=\"804\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"805\"><field name=\"NUM\">2000</field></block></value><next><block type=\"ros_scheduled_publish_play_tts\" id=\"806\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"807\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"808\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"809\"><field name=\"TEXT\">빨간불이 켜진 방이 현재 사용중이고, </field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"810\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"811\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"812\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"813\"><field name=\"TEXT\">LEFTATTENTION</field></block></value></block></value><next><block type=\"action_sleep\" id=\"814\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"815\"><field name=\"NUM\">4000</field></block></value><next><block type=\"ros_scheduled_publish_play_tts\" id=\"816\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"817\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"818\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"819\"><field name=\"TEXT\">녹색불이 켜진 방이 비어있는 회의실 입니다.</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"820\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"821\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"822\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"823\"><field name=\"TEXT\">RIGHTATTENTION</field></block></value></block></value><next><block type=\"action_sleep\" id=\"824\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"825\"><field name=\"NUM\">5500</field></block></value><next><block type=\"action_speak\" id=\"826\" inline=\"false\"><value name=\"VALUE\"><block type=\"variables_get\" id=\"827\"><field name=\"VAR\">is_empty</field></block></value><next><block type=\"controls_if\" id=\"828\" inline=\"false\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"829\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"830\"><field name=\"VAR\">is_empty</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"831\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"ros_scheduled_publish_play_tts\" id=\"832\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"833\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"834\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"835\"><field name=\"TEXT\">그럼 문을 열어 놓을께요. 안녕히가세요</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"836\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"837\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"838\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"839\"><field name=\"TEXT\">BYELEFTHAND</field></block></value></block></value><next><block type=\"ros_publish\" id=\"840\" inline=\"true\"><mutation></mutation><value name=\"NAME\"><block type=\"text\" id=\"841\"><field name=\"TEXT\">/door_ctrl</field></block></value><value name=\"TYPE\"><block type=\"text\" id=\"842\"><field name=\"TEXT\">std_msgs/Bool</field></block></value><value name=\"VALUE\"><block type=\"object_create_with\" id=\"843\" inline=\"false\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><block type=\"object_item\" id=\"844\" inline=\"true\"><field name=\"KEY\">data</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"845\"><field name=\"BOOL\">TRUE</field></block></value></block></value></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"ros_scheduled_publish_play_tts\" id=\"846\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"847\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"848\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"849\"><field name=\"TEXT\">비어있는 회의실이 없습니다. 나중에 다시 서비스를 시작해 주세요.</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"850\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"851\"><field name=\"VAR\">res_robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"852\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"853\"><field name=\"TEXT\">BYELEFTHAND</field></block></value></block></value><next><block type=\"udf_UDF_set_light\" id=\"854\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"855\" inline=\"false\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"856\"><field name=\"NUM\">1</field></block></value><value name=\"ADD1\"><block type=\"math_number\" id=\"857\"><field name=\"NUM\">2</field></block></value><value name=\"ADD2\"><block type=\"math_number\" id=\"858\"><field name=\"NUM\">3</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"859\"><field name=\"TEXT\">OFF</field></block></value></block></next></block></next></block></statement><next><block type=\"action_speak\" id=\"860\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"861\"><field name=\"TEXT\">[Welcome] Welcome End</field></block></value><next><block type=\"action_sleep\" id=\"862\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"863\"><field name=\"NUM\">3000</field></block></value><next><block type=\"udf_UDF_set_light\" id=\"864\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"865\" inline=\"false\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"866\"><field name=\"NUM\">3</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"867\"><field name=\"TEXT\">OFF</field></block></value><next><block type=\"action_sleep\" id=\"868\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"869\"><field name=\"NUM\">8000</field></block></value><next><block type=\"udf_UDF_set_light\" id=\"870\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"871\" inline=\"false\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"872\"><field name=\"NUM\">1</field></block></value><value name=\"ADD1\"><block type=\"math_number\" id=\"873\"><field name=\"NUM\">2</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"874\"><field name=\"TEXT\">OFF</field></block></value><next><block type=\"variables_set\" id=\"875\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"876\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"variables_set\" id=\"877\" inline=\"true\" x=\"1027\" y=\"421\"><field name=\"VAR\">is_empty</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"878\"><field name=\"BOOL\">FALSE</field></block></value></block><block type=\"procedures_defnoreturn\" id=\"879\" x=\"1027\" y=\"487\"><mutation><arg name=\"res\"></arg></mutation><field name=\"NAME\">check_room_ex</field><statement name=\"STACK\"><block type=\"ros_scheduled_action_check_motion\" id=\"880\" inline=\"true\"><mutation></mutation><field name=\"ON_RESULT_PARAM\">item</field><field name=\"ON_FEEDBACK_PARAM\">item</field><value name=\"CTX\"><block type=\"variables_get\" id=\"881\"><field name=\"VAR\">res</field></block></value><value name=\"GOAL\"><block type=\"ros_msg_rocon_ninja_block-CheckMotionGoal\" id=\"882\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DEVICE_NAME\"><block type=\"text\" id=\"883\"><field name=\"TEXT\"></field></block></value></block></value><statement name=\"ON_RESULT\"><block type=\"action_speak\" id=\"884\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"885\"><field name=\"TEXT\">[Welcome] Result</field></block></value><next><block type=\"variables_set\" id=\"886\" inline=\"true\"><field name=\"VAR\">is_empty</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"887\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"controls_if\" id=\"888\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"889\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"890\"><field name=\"VAR\">item</field><field name=\"KEY\">success</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"891\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_forEach\" id=\"892\" inline=\"false\"><field name=\"VAR\">result</field><value name=\"LIST\"><block type=\"object_item_get\" id=\"893\"><field name=\"VAR\">item</field><field name=\"KEY\">is_detected</field></block></value><statement name=\"DO\"><block type=\"variables_set\" id=\"894\" inline=\"true\"><field name=\"VAR\">message</field><value name=\"VALUE\"><block type=\"text\" id=\"895\"><field name=\"TEXT\">empty</field></block></value><next><block type=\"variables_set\" id=\"896\" inline=\"true\"><field name=\"VAR\">hue_id</field><value name=\"VALUE\"><block type=\"math_number\" id=\"897\"><field name=\"NUM\">1</field></block></value><next><block type=\"variables_set\" id=\"898\" inline=\"true\"><field name=\"VAR\">hue_color</field><value name=\"VALUE\"><block type=\"text\" id=\"899\"><field name=\"TEXT\">RED</field></block></value><next><block type=\"controls_if\" id=\"900\" inline=\"false\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"901\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"902\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"903\"><field name=\"TEXT\">key</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"904\"><field name=\"TEXT\">motion_detector</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"905\" inline=\"true\"><field name=\"VAR\">hue_id</field><value name=\"VALUE\"><block type=\"math_number\" id=\"906\"><field name=\"NUM\">1</field></block></value></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"907\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"908\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"909\"><field name=\"TEXT\">key</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"910\"><field name=\"TEXT\">motion_detector_2</field></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\" id=\"911\" inline=\"true\"><field name=\"VAR\">hue_id</field><value name=\"VALUE\"><block type=\"math_number\" id=\"912\"><field name=\"NUM\">2</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"action_speak\" id=\"913\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"914\"><field name=\"TEXT\">Unknown key</field></block></value><next><block type=\"action_speak\" id=\"915\" inline=\"false\"><value name=\"VALUE\"><block type=\"object_item_get2\" id=\"916\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"917\"><field name=\"TEXT\">key</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"918\" inline=\"false\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"919\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"920\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"921\"><field name=\"TEXT\">value</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"922\"><field name=\"TEXT\">True</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"923\" inline=\"true\"><field name=\"VAR\">message</field><value name=\"VALUE\"><block type=\"text\" id=\"924\"><field name=\"TEXT\">occupied</field></block></value><next><block type=\"variables_set\" id=\"925\" inline=\"true\"><field name=\"VAR\">hue_color</field><value name=\"VALUE\"><block type=\"text\" id=\"926\"><field name=\"TEXT\">RED</field></block></value></block></next></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"927\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"928\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"929\"><field name=\"TEXT\">value</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"930\"><field name=\"TEXT\">False</field></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\" id=\"931\" inline=\"true\"><field name=\"VAR\">is_empty</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"932\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"variables_set\" id=\"933\" inline=\"true\"><field name=\"VAR\">message</field><value name=\"VALUE\"><block type=\"text\" id=\"934\"><field name=\"TEXT\">empty</field></block></value><next><block type=\"variables_set\" id=\"935\" inline=\"true\"><field name=\"VAR\">hue_color</field><value name=\"VALUE\"><block type=\"text\" id=\"936\"><field name=\"TEXT\">GREEN</field></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"action_speak\" id=\"937\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"938\"><field name=\"TEXT\">Unknown value</field></block></value><next><block type=\"action_speak\" id=\"939\" inline=\"false\"><value name=\"VALUE\"><block type=\"object_item_get2\" id=\"940\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"941\"><field name=\"TEXT\">value</field></block></value></block></value></block></next></block></statement><next><block type=\"action_speak\" id=\"942\" inline=\"false\"><value name=\"VALUE\"><block type=\"text_join\" id=\"943\" inline=\"false\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"object_item_get2\" id=\"944\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"945\"><field name=\"TEXT\">key</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\"946\"><field name=\"TEXT\">: </field></block></value><value name=\"ADD2\"><block type=\"variables_get\" id=\"947\"><field name=\"VAR\">message</field></block></value></block></value><next><block type=\"udf_UDF_set_light\" id=\"948\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"949\" inline=\"false\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><block type=\"variables_get\" id=\"950\"><field name=\"VAR\">hue_id</field></block></value></block></value><value name=\"COLOR\"><block type=\"variables_get\" id=\"951\"><field name=\"VAR\">hue_color</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block></next></block></next></block></statement></block></statement></block></xml>","title":"welcome_without_prezi_wf"}