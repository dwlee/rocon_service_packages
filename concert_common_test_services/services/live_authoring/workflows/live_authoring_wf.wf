{"id":"420e696226483fee96cca53e1e20df36","js":"var robosem;\nvar nao_res;\nvar item;\n\n\n$engine.print(\"Rocon Authoring :\" + JSON.stringify('[Live Authoring] Live authoring start'));(function(robosem){ if(robosem){   (function(nao_res){ if(nao_res){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Live Authoring] nao resource allocation success'));$engine.subscribe('/voice_command', 'std_msgs/String', function(item){   $engine.print(\"Rocon Authoring :\" + JSON.stringify(String('[Live Authoring] voice command: ') + String(item['data'])));if (item['data'] == 'greeting') {\n        $engine.scheduledPublish(nao_res, \"/notice\", \"rocon_demo_msgs/Notice\", ({\"message\":'How do you do? welcome to rocon!',\"level\":1}));$engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'어서오세요.'}));} else if (item['data'] == 'introduce') {\n        $engine.scheduledPublish(nao_res, \"/notice\", \"rocon_demo_msgs/Notice\", ({\"message\":'Let me introduce live authoring!',\"level\":2}));$engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'콘서트 서비스 저작을 보여드리겠습니다.'}));$engine.scheduledPublish(robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'HAPPY3'}));}\n     }); }else{   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Live Authoring] nao resource allocation fail'));} })($engine.allocateResource(\"concert_demo_rapps/notice\", \"rocon:/aldebaran_nao\", [{\"remap_from\":\"/notice\",\"remap_to\":\"/notice\"}], [], {\"timeout\":\"150000000\",\"type\":\"dynamic\"})); }else{ } })($engine.allocateResource(\"rapix_bridge/rapix_bridge\", \"rocon:/pc\", [{\"remap_from\":\"play_tts\",\"remap_to\":\"/play_tts\"},{\"remap_from\":\"robot_motion\",\"remap_to\":\"/robot_motion\"},{\"remap_from\":\"touch_sensor_event\",\"remap_to\":\"/touch_sensor_event\"}], [{\"key\":\"robot_ip\",\"value\":\"192.168.10.28\"}], {\"timeout\":15000,\"type\":\"dynamic\"}));","xml":"<xml xmlns=\"http://www.w3.org/1999/xhtml\"><block type=\"action_speak\" id=\"400\" inline=\"false\" x=\"-98\" y=\"-350\"><value name=\"VALUE\"><block type=\"text\" id=\"401\"><field name=\"TEXT\">[Live Authoring] Live authoring start</field></block></value><next><block type=\"ros_requester_allocate_with_block\" id=\"402\"><mutation extra_config=\"{&quot;timeout&quot;:15000,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;play_tts&quot;,&quot;remap_to&quot;:&quot;/play_tts&quot;},{&quot;remap_from&quot;:&quot;robot_motion&quot;,&quot;remap_to&quot;:&quot;/robot_motion&quot;},{&quot;remap_from&quot;:&quot;touch_sensor_event&quot;,&quot;remap_to&quot;:&quot;/touch_sensor_event&quot;}],&quot;parameters&quot;:[{&quot;key&quot;:&quot;robot_ip&quot;,&quot;value&quot;:&quot;192.168.10.28&quot;}],&quot;rapp&quot;:&quot;rapix_bridge/rapix_bridge&quot;,&quot;uri&quot;:&quot;rocon:/pc&quot;}\"></mutation><field name=\"TYPE\">dynamic</field><field name=\"ON_SUCCESS_PARAM\">robosem</field><statement name=\"ON_SUCCESS\"><block type=\"ros_requester_allocate_with_block\" id=\"403\"><mutation extra_config=\"{&quot;timeout&quot;:&quot;150000000&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;/notice&quot;,&quot;remap_to&quot;:&quot;/notice&quot;}],&quot;parameters&quot;:[],&quot;rapp&quot;:&quot;concert_demo_rapps/notice&quot;,&quot;uri&quot;:&quot;rocon:/aldebaran_nao&quot;}\"></mutation><field name=\"TYPE\">dynamic</field><field name=\"ON_SUCCESS_PARAM\">nao_res</field><statement name=\"ON_SUCCESS\"><block type=\"action_speak\" id=\"404\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"405\"><field name=\"TEXT\">[Live Authoring] nao resource allocation success</field></block></value><next><block type=\"ros_subscribe_/voice_command-com.github.turtlebot.turtlebot_android.voice_commander.indigo\" id=\"406\"><mutation extra=\"{&quot;client_app_name&quot;:&quot;com.github.turtlebot.turtlebot_android.voice_commander.indigo&quot;,&quot;tooltip&quot;:&quot;com.github.turtlebot.turtlebot_android.voice_commander.indigo&quot;}\"></mutation><field name=\"DO_PARAM\">item</field><statement name=\"DO\"><block type=\"action_speak\" id=\"407\" inline=\"false\"><value name=\"VALUE\"><block type=\"text_join\" id=\"408\" inline=\"false\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"409\"><field name=\"TEXT\">[Live Authoring] voice command: </field></block></value><value name=\"ADD1\"><block type=\"object_item_get\" id=\"410\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value></block></value><next><block type=\"controls_if\" id=\"411\" inline=\"false\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"412\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"413\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"414\"><field name=\"TEXT\">greeting</field></block></value></block></value><statement name=\"DO0\"><block type=\"ros_scheduled_publish_/notice\" id=\"415\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"416\"><field name=\"VAR\">nao_res</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_rocon_demo_msgs-Notice\" id=\"417\" inline=\"false\"><mutation></mutation><value name=\"MESSAGE\"><block type=\"text\" id=\"418\"><field name=\"TEXT\">How do you do? welcome to rocon!</field></block></value><value name=\"LEVEL\"><block type=\"math_number\" id=\"419\"><field name=\"NUM\">1</field></block></value></block></value><next><block type=\"ros_scheduled_publish_play_tts\" id=\"442\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"443\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"444\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"445\"><field name=\"TEXT\">어서오세요.</field></block></value></block></value></block></next></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"424\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"425\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"426\"><field name=\"TEXT\">introduce</field></block></value></block></value><statement name=\"DO1\"><block type=\"ros_scheduled_publish_/notice\" id=\"427\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"428\"><field name=\"VAR\">nao_res</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_rocon_demo_msgs-Notice\" id=\"429\" inline=\"false\"><mutation></mutation><value name=\"MESSAGE\"><block type=\"text\" id=\"430\"><field name=\"TEXT\">Let me introduce live authoring!</field></block></value><value name=\"LEVEL\"><block type=\"math_number\" id=\"431\"><field name=\"NUM\">2</field></block></value></block></value><next><block type=\"ros_scheduled_publish_play_tts\" id=\"432\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"433\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"434\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"435\"><field name=\"TEXT\">콘서트 서비스 저작을 보여드리겠습니다.</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"436\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"437\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"438\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"439\"><field name=\"TEXT\">HAPPY3</field></block></value></block></value></block></next></block></next></block></statement></block></next></block></statement></block></next></block></statement><statement name=\"ON_FAIL\"><block type=\"action_speak\" id=\"440\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"441\"><field name=\"TEXT\">[Live Authoring] nao resource allocation fail</field></block></value></block></statement></block></statement></block></next></block></xml>","title":"live_authoring_wf","description":"Service Description","created_at":1434355540202}